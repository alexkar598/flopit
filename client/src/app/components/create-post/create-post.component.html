<form #f="ngForm" novalidate (ngSubmit)="submit(f)">
  <input
    nbInput
    fullWidth
    placeholder="Titre de la publication"
    type="text"
    fieldSize="giant"
    name="title"
    ngModel
  />

  <div class="sub-field">
    <input
      type="text"
      nbInput
      fullWidth
      #subFilter
      (input)="rechercheSub(subFilter)"
      placeholder="Recherche subs"
      [nbAutocomplete]="autoSub"
    />
    <nb-autocomplete #autoSub (selectedChange)="onSubSelection($event)">
      @for (sub of subs$ | async; track sub.id) {
        <nb-option [value]="sub.name">
          <nb-user
            [picture]="
              sub.iconOid != null
                ? getImgUrl(sub.iconOid, { width: 64, height: 64 })
                : ''
            "
            [name]="'f/' + sub.name"
          />
        </nb-option>
      }
    </nb-autocomplete>
  </div>

  <quill-editor class="quill" ngModel format="object" name="content" />

  <div class="submit-wrapper">
    <button nbButton status="primary" class="submit">Publier</button>
  </div>
</form>
